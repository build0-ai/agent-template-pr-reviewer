{
  "steps": [
    {
      "id": "get_pr",
      "type": "tool",
      "tool": "github_get_pr",
      "args": {
        "owner": "{{ input.repository.owner.login }}",
        "repo": "{{ input.repository.name }}",
        "pr_number": "{{ input.pull_request.number }}"
      }
    },
    {
      "id": "summarize",
      "type": "ai_agent",
      "args": {
        "prompt": "You are a code review assistant. Analyze the following pull request and generate a concise summary.\n\n## Pull Request Information\n\n**Title:** {{ get_pr.output.title }}\n\n**Description:**\n{{ get_pr.output.body }}\n\n**Stats:**\n- Files changed: {{ get_pr.output.changed_files }}\n- Additions: {{ get_pr.output.additions }}\n- Deletions: {{ get_pr.output.deletions }}\n\n**Files Modified:**\n{{ get_pr.output.files }}\n\n**Diff:**\n```\n{{ get_pr.output.diff }}\n```\n\n## Your Task\n\nGenerate a well-structured PR summary that includes:\n\n1. **Overview**: A 2-3 sentence high-level summary of what this PR does\n2. **Key Changes**: Bullet points of the main changes\n3. **Files Impact**: Brief description of which files were changed and why\n\nFormat your response in clean markdown that will render well as a GitHub comment. Keep it concise.",
        "working_dir": "."
      }
    },
    {
      "id": "comment",
      "type": "tool",
      "tool": "github_comment_pr",
      "args": {
        "owner": "{{ input.repository.owner.login }}",
        "repo": "{{ input.repository.name }}",
        "pr_number": "{{ input.pull_request.number }}",
        "body": "## ðŸ¤– AI-Generated PR Summary\n\n{{ summarize.output }}\n\n---\n*This summary was automatically generated.*"
      }
    }
  ]
}
