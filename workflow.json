{
  "steps": [
    {
      "id": "get_pr",
      "name": "Fetch PR Details",
      "type": "tool",
      "tool": "github_get_pr",
      "args": {
        "owner": "{{ input.repository.owner.login }}",
        "repo": "{{ input.repository.name }}",
        "pr_number": "{{ input.pull_request.number }}"
      }
    },
    {
      "id": "review",
      "name": "Review Code",
      "type": "ai_agent",
      "args": {
        "prompt": "You are an expert code reviewer. Analyze the following pull request and provide a comprehensive review.\n\n## Pull Request Information\n\n**Title:** {{ get_pr.output.title }}\n\n**Description:**\n{{ get_pr.output.body }}\n\n**Stats:**\n- Files changed: {{ get_pr.output.changed_files }}\n- Additions: {{ get_pr.output.additions }}\n- Deletions: {{ get_pr.output.deletions }}\n\n**Files Modified:**\n{{ get_pr.output.files }}\n\n**Diff:**\n```\n{{ get_pr.output.diff }}\n```\n\n## Your Review Should Include:\n\n1. **Code Quality**: Assess readability, maintainability, and adherence to best practices\n2. **Potential Bugs**: Identify any logic errors, edge cases, or potential runtime issues\n3. **Security Issues**: Flag any security vulnerabilities (XSS, SQL injection, auth issues, etc.)\n4. **Performance**: Note any performance concerns or optimization opportunities\n5. **Suggestions**: Provide actionable improvement suggestions\n\nFormat your response as a structured code review with sections for each category. Use markdown formatting that renders well as a GitHub comment.",
        "working_dir": "."
      }
    },
    {
      "id": "comment",
      "name": "Post Review Comment",
      "type": "tool",
      "tool": "github_comment_pr",
      "args": {
        "owner": "{{ input.repository.owner.login }}",
        "repo": "{{ input.repository.name }}",
        "pr_number": "{{ input.pull_request.number }}",
        "body": "## ðŸ¤– AI Code Review\n\n{{ review.output }}\n\n---\n*This review was automatically generated by the PR Reviewer agent.*"
      }
    }
  ]
}
