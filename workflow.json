{
  "steps": [
    {
      "id": "clone_repo",
      "type": "tool",
      "tool": "github_clone",
      "args": {
        "repo_url": "https://github.com/build0-ai/platform.git",
        "target_dir": "./platform"
      }
    },
    {
      "id": "fetch_issues",
      "type": "tool",
      "tool": "sentry_get_issues",
      "args": {
        "org": "build0",
        "project": "platfom",
        "limit": 1
      }
    },
    {
      "id": "fetch_details",
      "type": "tool",
      "tool": "sentry_get_issue_details",
      "args": {
        "issue_id": "{{ fetch_issues.output.0.id }}"
      }
    },
    {
      "id": "investigate",
      "type": "ai_agent",
      "args": {
        "prompt": "You are investigating a Sentry issue. Here are the details:\n\n{{ fetch_details.output }}\n\nAnalyze the codebase to find the root cause. Explain the issue and suggest a fix.",
        "working_dir": "./platform"
      }
    },
    {
      "id": "post_slack",
      "type": "tool",
      "tool": "slack_post_message",
      "args": {
        "channel": "C09V1QS1QUF",
        "text": "ðŸš¨ *New Sentry Issue Investigation*\n\n*Issue*: {{ fetch_details.output.issue.title }}\n*Analysis*: {{ investigate.output }}\n\nReact with âœ… to authorize a fix."
      }
    },
    {
      "id": "wait_approval",
      "type": "tool",
      "tool": "slack_wait_approval",
      "args": {
        "channel": "C09V1QS1QUF",
        "message_ts": "{{ post_slack.output.ts }}",
        "timeout_mins": 30
      }
    },
    {
      "id": "fix_issue",
      "type": "ai_agent",
      "args": {
        "prompt": "The fix has been approved. Please implement the fix for the issue investigated earlier. Here is the investigation result:\n\n{{ investigate.output }}\n\nCreate a new branch, commit the changes, and push.",
        "working_dir": "./platform"
      }
    }
  ]
}
